---
title: webpack
image: /assets/img/blog/wade-lambert.jpg
description: >
  version: webpack@4.43.0
---

### webpack
webpack 是基于nodejs的模块化打包工具 它会从入口模块文件出发 识别出代码中的模块导入语句  递归地找出所以依赖 并将这些文件打包到一个文件中
是工程化 自动化 思想在前端的体现

### 环境
- 一般情况下 node版本越高 打包速度越快 最新稳定版就好

### 安装 
- 全局安装 npm install webpack webpack-cli -g  ####### 不推荐 #######
- 项目安装 cd xxx/xxx   npm init -y && npm install webpack webpack-cli -D
- 检查安装 npx webpack -v

### 核心(基础配置)
    webpack 原始只可以识别出 .json / .js 文件 并且自带 默认构建配置
    如需要自定构建配置 可添加 webpack.config.js  使用module.exports = {}  导出一个对象即可
    
#### webpack.config.js

- entry 、output 、mode、module
- output
   1、path     生成的路径
   2、filename 生成的名称  推荐使用占位符 name 
        常用占位符: hash/chunkhash/name/id
- mode 
   1、production
   2、development
   3、none
- module  options：
    1、rules: [
        {
           test: //,
           use:  
        }
    ]
- plugins:[]  //插件配置  

例如：
``` javascript
module.exports = {
    //上下文 项目打包的相对路径
    // context: process.cwd(),
    //入口   //options 字符串、数组、对象
    entry: "./src/index.js",
    // entry: ["./src/index.js", "./src/other.js"],
    // entry:{
    //     index: "./src/index.js",
    //     other: "./src/other.js"
    // },
    //出口
    output: {
        //构建后的文件放在那
        path: path.resolve(__dirname, './dist'),
        //构建后的文件名称   //多入口 对应多出口  并且不可以指定名称  使用占位符[name]
        /**

        tips: 无论是多出口、还是单出口 都推荐使用占位符[name]
        常用占位符: 
        hash 整个项目的hash 可以指定长度 [hash:20] 默认长度是20  一般指定6位 每构建一次就会有一个新hash
        chunkhash 根据不同入口 entry进行依赖解析   构建对应的chunk  只要组成entry的模块没有内容改动  则对应hash不变
        name
        id
         */
        // filename: "main.js"
        filename: "[name]-[hash:6]-[id].js"
    },
    // none  development production  
    mode: "development" ,
    //处理不认识的模块
    module: {
        //认识新模块 css
        rules: [
            {
                test: /\.css$/,
                //style-loader 提取 js中提取css的loader 在html中创建style
                use: ["style-loader", "css-loader"]
            },
            //认识预处理less/scss等 与 后处理postcss-loader(添加后缀)
            {
                test: /\.less$/,
                use: [
                    'style-loader',
                    {
                        loader: "css-loader",
                        options: {
                            modules: true
                        }
                    },
                    {
                        loader: "postcss-loader",
                    },
                    'less-loader']
            },
            //认识图片
            {
                test: /\.(png|jpe?g|fig)$/i,
                use: [
                    {
                        loader: 'file-loader',
                        options: {
                            name: '[name]-[hash:6].[ext]',
                            outputPath: 'images'
                        }
                    }
                ]
            }
        ],
    },
    plugins: [new HtmlWebpackPlugin()] //插件配置

}
```  

### package.json

``` json
{
  "name": "c",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "webpack"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "autoprefixer": "^9.7.6",
    "file-loader": "^6.1.0",
    "less": "^4.1.1",
    "less-loader": "^6.1.1",
    "postcss": "^8.2.7",
    "postcss-loader": "^3.0.0",
    "sass": "^1.32.8",
    "sass-loader": "^11.0.1",
    "webpack": "^4.46.0",
    "webpack-cli": "^4.5.0"
  },
  "dependencies": {
    "clean-webpack-plugin": "^3.0.0",
    "css-loader": "^5.1.1",
    "style-loader": "^2.0.0"
  }
}

```

### postcss.config.js

```javascript
const autoprefixer = require("autoprefixer");
module.exports = {
  plugins: [
    autoprefixer({
      // ios 14 13
      // 全球浏览器的市场份额 大于1%的浏览器
      overrideBrowserslist: ["last 2 versions", ">1%"],
    }),
  ],
};

```
               
   
   
   
   
   
        









  
